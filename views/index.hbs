<!DOCTYPE html>
<head>

  <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/stylesheets/style.css" >
    <div class = "container">
      <img src="images/WaitingRoom.png" class = "image"/>
      <iframe src="http://free.timeanddate.com/clock/i63ij6l8/n1183/tlca/fs22/pct/ftb/tt0/tw1/tm1/ts1/tb4" frameborder="0" width="195" height="53" allowTransparency="true"></iframe>
    </div>
  </div>
<pre>

</pre>
  <center>
  Enter your location below:
  </center>

    <div class="input-group">
      <input type="text" id = "textbox1" style="width:97%;" align = "right" placeholder = "Location">
      <span class="input-group-btn">
      <button class="btn btn-default" type="button" id = "button1">Go!</button>
      </span>
</div><!-- /.row -->

<style>
/* The Modal (background) */
.modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    padding-top: 100px; /* Location of the box */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content */
.modal-content {
    background-color: #fefefe;
    margin: auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
}

/* The Close Button */
.close {
    color: #aaaaaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
}

.close:hover,
.close:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
}
</style>
</head>
<body>

  <pre>

  </pre>

  <div class = "test">
  <p>
      Service options:
  </p>
  <ul class="list-group">
  <button id="myBtn" style="width:50%;" class="button button1"> Hospital 1  <span class="badge badge-pill badge-dark">7</span>
  </button>
  </ul>

  <ul class="list-group">
  <button id="myBtn2" style="width:50%;" class="button button1">Hospital 2  <span class="badge badge-pill badge-dark">7</span>
  </button>
  </ul>

  <ul class="list-group">
  <button id="myBtn3" style="width:50%;" class="button button1">Hospital 3  <span padding = "10px" class="badge badge-pill badge-dark">7</span>
  </button>
  </ul>

  <!-- The Modal -->
  <div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
      <h3>Institution Name</h3>
      <p> Address: </p>
      <p> Phone Number: </p>
      <p> Hours of Operation: </p>
      <p> Number of patients in Line: </p>
      <p> Peak Hours: </p>
      <p> Physicians Currently Working: </p>
      <p> Distance: </p>
  </div>

</div>

<p id="demo">Click below to find nearby hospitals.</p>
<button onclick="getLocation()">Locate hospitals</button>
<div id="mapholder"></div>

<script name = "testScript">
  document.getElementById("button1").onclick = function(){
    document.getElementsByClassName("test")[0].style.visibility = "visible";
    var text = document.getElementById("textbox1").value;

    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function() {
        if (xhr.readyState == XMLHttpRequest.DONE) {
            console.log(xhr.responseText);
        }
    }

    var thisUrl = document.URL;
    console.log(thisUrl);
    xhr.open("POST", thisUrl+'click', true);
    xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.send(JSON.stringify({
        'test': text
    }));
  }
  // Get the modal
var modal= document.getElementById('myModal');
// Get the button that opens the modal
var btn = document.getElementById("myBtn");
// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks the button, open the modal
btn.onclick = function() {
    modal.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
    modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}
var x = document.getElementById("demo");

function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
    } else {
        x.innerHTML = "Geolocation is not supported by this browser.";
    }
}

function showPosition(position) {
    var latlon = position.coords.latitude + "," + position.coords.longitude;
    var img_url = "https://maps.googleapis.com/maps/api/staticmap?center="
    +latlon+"&zoom=14&size=400x300&key=AIzaSyAqJwYpuhL7K7sVhjsSp8sfA3QMBd2bpCU";
    document.getElementById("mapholder").innerHTML = "<img src='"+img_url+"'>";
}

function showError(error) {
    switch(error.code) {
        case error.PERMISSION_DENIED:
            x.innerHTML = "User denied the request for Geolocation."
            break;
        case error.POSITION_UNAVAILABLE:
            x.innerHTML = "Location information is unavailable."
            break;
        case error.TIMEOUT:
            x.innerHTML = "The request to get user location timed out."
            break;
        case error.UNKNOWN_ERROR:
            x.innerHTML = "An unknown error occurred."
            break;
    }
}

</script>
</body>
